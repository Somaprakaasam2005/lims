{% extends 'base.html' %}
{% block content %}
<div class='container-fluid'>
  <div class='row mb-4 align-items-center'>
    <div class='col'>
      <h1><i class='bi bi-folder'></i> Projects</h1>
    </div>
    <div class='col-auto'>
      <a href='/projects/new' class='btn btn-primary'>
        <i class='bi bi-plus-circle'></i> New Project
      </a>
    </div>
  </div>

  {% if projects %}
    <div class='table-responsive'>
      <table class='table table-hover table-striped'>
        <thead>
          <tr>
            <th>Project Code</th>
            <th>Project Name</th>
            <th>Client</th>
            <th>Status</th>
            <th>Created</th>
            <th style='width: 200px;'>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for p in projects %}
            <tr>
              <td><strong>{{ p.project_code }}</strong></td>
              <td>{{ p.project_name }}</td>
              <td>{{ p.client_name or 'â€”' }}</td>
              <td>
                <span class='status-{{p.status.lower().replace(" ", "-")}}'>
                  {{ p.status }}
                </span>
              </td>
              <td>
                <small>{{ p.created_at.strftime('%Y-%m-%d') if p.created_at else 'N/A' }}</small>
              </td>
              <td>
                <a href='/projects/{{p.id}}' class='btn btn-sm btn-outline-primary' title='View'>
                  <i class='bi bi-eye'></i>
                </a>
                <a href='/projects/{{p.id}}/edit' class='btn btn-sm btn-outline-warning' title='Edit'>
                  <i class='bi bi-pencil'></i>
                </a>
                <form method='post' action='/projects/{{p.id}}/delete' style='display:inline;' onsubmit='return confirm("Are you sure you want to delete this project?")'>
                  <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                  <button type='submit' class='btn btn-sm btn-outline-danger' title='Delete'>
                    <i class='bi bi-trash'></i>
                  </button>
                </form>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <div class='alert alert-info'>
      <i class='bi bi-info-circle'></i> No projects yet.
      <a href='/projects/new' class='alert-link'>Create your first project</a>
    </div>
  {% endif %}
</div>
{% endblock %}
